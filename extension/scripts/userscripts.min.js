"use strict";function ft(){$("#Main .tab").addClass("v2p-hover-btn"),$("#Main .topic_buttons a.tb").addClass("v2p-hover-btn"),$('#Main .topic-link, .item_hot_topic_title > a, .item_node, a[href="/write"]').prop("target","_blank")}var Gt=`body{--v2p-color-main-100: #f1f5f9;--v2p-color-main-200: #e2e8f0;--v2p-color-main-300: #cbd5e1;--v2p-color-main-400: #94a3b8;--v2p-color-main-500: #64748b;--v2p-color-main-600: #475569;--v2p-color-main-700: #334155;--v2p-color-main-800: #1e293b;--v2p-color-accent-50: #ecfdf5;--v2p-color-accent-100: #d1fae5;--v2p-color-accent-200: #a7f3d0;--v2p-color-accent-300: #6ee7b7;--v2p-color-accent-400: #34d399;--v2p-color-accent-500: #10b981;--v2p-color-accent-600: #059669;--v2p-color-border: rgb(238 238 238);--v2p-color-wrapper-bg: rgb(249 250 252);--v2p-color-content-bg: #fff;--v2p-color-heart: #f43f5e;--v2p-color-heart-fill: #ffe4e6;--v2p-box-shadow: 0 2px 2px var(--v2p-color-main-200);--v2p-font-noto-sans: -apple-system, BlinkMacSystemFont, "Noto Sans SC", sans-serif;--color-fade: var(--v2p-color-main-400);--color-gray: var(--v2p-color-main-400);--link-color: var(--v2p-color-main-800);--link-caution-color: #f59e0b;--box-border-color: var(--v2p-color-main-100);--box-foreground-color: var(--v2p-color-main-800);--box-background-color: var(--v2p-color-content-bg);--box-background-alt-color: var(--v2p-color-main-100);--box-background-hover-color: var(--v2p-color-main-200);--button-background-color: var(--v2p-color-main-200);--button-foreground-color: var(--v2p-color-main-500);--button-border-color: var(--v2p-color-main-300);color:var(--v2p-color-main-800);font-family:var(--v2p-font-noto-sans);background-color:var(--v2p-color-wrapper-bg)}body:has(.Night){--v2p-color-main-100: #222;--v2p-color-main-200: #393939;--v2p-color-main-300: #4c4c4c;--v2p-color-main-400: #6a6a6a;--v2p-color-main-500: #999;--v2p-color-main-600: #cbcbcb;--v2p-color-main-700: #e0e0e0;--v2p-color-main-800: #f1f1f1;--v2p-color-accent-50: #ecfdf5;--v2p-color-accent-100: #d1fae5;--v2p-color-accent-200: #a7f3d0;--v2p-color-accent-300: #6ee7b7;--v2p-color-accent-400: #34d399;--v2p-color-accent-500: #10b981;--v2p-color-accent-600: #059669;--v2p-color-border: rgb(238 238 238);--v2p-color-wrapper-bg: #181818;--v2p-color-content-bg: #222}body{overflow:overlay;scrollbar-gutter:stable}body #Top{height:55px;background-color:var(--v2p-color-content-bg);border:none}body #Bottom{border:none}body #Wrapper{background-color:inherit;background-image:none}body #Wrapper.Night{background-color:inherit;background-image:none}body #Wrapper .content{display:flex;gap:15px}body #Leftbar{order:1;float:none}body #Main{flex:1;order:2;margin:0}body #Rightbar{order:3;float:none}body h1{text-shadow:2px 2px var(--v2p-color-content-bg)}body .box{overflow:hidden;background-color:var(--v2p-color-content-bg);border:none;border-radius:8px;box-shadow:none}body .box .header .gray{color:var(--v2p-color-main-400)}body .button.normal,body .button.super{position:relative;display:inline-flex;gap:5px;align-items:center;height:28px;padding:0 12px;color:var(--v2p-color-main-500);font-weight:500;font-size:14px;font-family:inherit;line-height:28px;background:none;background-color:var(--v2p-color-main-100);border:none;border-radius:6px;outline:none;box-shadow:0 1.8px 0 var(--v2p-color-main-200),0 1.8px 0 var(--v2p-color-main-100);cursor:pointer;user-select:none}body .button.normal:hover:enabled,body .button.super:hover:enabled{color:var(--v2p-color-main-500);font-weight:500;text-shadow:none;background-color:var(--v2p-color-main-100);border:none;box-shadow:0 1.8px 0 var(--v2p-color-main-200),0 1.8px 0 var(--v2p-color-main-100)}body .button.normal.hover_now,body .button.normal.disable_now,body .button.super.hover_now,body .button.super.disable_now{color:var(--v2p-color-main-500) !important;text-shadow:none !important;background-color:var(--v2p-color-main-100) !important}body .button.normal.disable_now,body .button.super.disable_now{cursor:default;opacity:.5;pointer-events:none}body .button.normal kbd,body .button.super kbd{position:relative;right:-4px;padding:0 3px;font-size:90%;line-height:initial;border:1px solid var(--v2p-color-main-200);border-radius:4px}body .button.special{color:var(--v2p-color-accent-500);background-color:var(--v2p-color-accent-100);box-shadow:0 1.8px 0 var(--v2p-color-accent-200),0 1.8px 0 var(--v2p-color-accent-100)}body .button.special:hover:enabled{color:var(--v2p-color-accent-500);background-color:var(--v2p-color-accent-100);box-shadow:0 1.8px 0 var(--v2p-color-accent-200),0 1.8px 0 var(--v2p-color-accent-100)}body .button.v2p-prev-btn,body .button.v2p-next-btn{padding:0 15px}body a.node:link{padding:5px 6px;color:var(--v2p-color-main-400);font-size:13px;background-color:var(--v2p-color-main-100);border-radius:4px}body .outdated{font-size:12px;border-color:var(--v2p-color-main-200);border-bottom:none}body .page_normal:link,body .page_normal:visited,body .page_current:link,body .page_current:visited{border:none}body .page_normal:link,body .page_normal:visited{background-color:var(--v2p-color-content-bg);box-shadow:0 2px 2px var(--v2p-color-main-200)}body .page_current:link,body .page_current:visited{font-weight:500;background-color:var(--v2p-color-main-200);box-shadow:none}body .page_input{display:none}body .dock_area{background-image:none}::selection{color:currentcolor;background-color:var(--v2p-color-main-200)}img::selection{background-color:var(--v2p-color-main-400)}#reply-box.reply-box-sticky{bottom:20px;z-index:10;overflow:hidden;border:none;border-radius:10px;box-shadow:0 0 15px 5px var(--v2p-color-main-200)}#reply-box #reply_content{border-color:var(--v2p-color-main-300);border-radius:6px}#reply-box #reply_content+.flex-one-row{gap:10px;justify-content:flex-start}#reply-box #reply_content+.flex-one-row .gray{margin-left:auto}#Main #reply-box>.cell.flex-one-row,#Main #reply-box>.cell.flex-row-end{padding:12px 10px;font-size:12px}#Main #reply-box .flex-one-row{padding:0;font-size:12px}#search-container{height:30px;margin:0 30px;background-color:var(--v2p-color-main-100);border:none;border-radius:6px}#search-container::before{top:0;left:4px;background-size:14px 14px;opacity:.6;filter:none}#search-container.active{background-color:var(--v2p-color-main-100)}#search-container #search-result{top:42px;box-shadow:0 0 15px 5px var(--v2p-color-main-200)}#no-comments-yet{color:var(--v2p-color-main-400);border-color:var(--v2p-color-main-400)}.box .tag{color:var(--v2p-color-main-400);font-size:12px;background-color:var(--v2p-color-main-100);border-radius:5px}.box .tag::before{color:var(--v2p-color-main-500)}.box .tag>li{opacity:.6}#Top .content{height:100%}#Top .site-nav{height:100%;padding:0}#Top .tools{display:flex;gap:8px 15px;align-items:center;justify-content:flex-end;font-weight:400;font-size:14px}#Top .tools .top{margin-left:0;padding:3px 5px;color:var(--v2p-color-main-400);border-radius:4px}#Top .tools .top:hover{color:var(--v2p-color-main-800)}#Top .tools .top:not(.v2p-hover-btn):hover{background-color:var(--v2p-color-main-100)}#Top .tools .top.v2p-hover-btn{transition:color .3s}#Main>.box{padding:0 12px}#Main>.box .cell{padding:20px 10px}#Main .topic_content{font-size:16px}#Main .subtle{background-color:var(--v2p-color-accent-50);border-left:3px solid var(--v2p-color-accent-200)}#Main .vote:link{color:var(--v2p-color-main-500);border-color:var(--v2p-color-main-300);border-radius:5px}#Main .vote:link:hover{box-shadow:0 2px 2px var(--v2p-color-main-200)}#Main .cell_tab_current{border-color:var(--v2p-color-main-800)}#Main .cell .topic-link{color:var(--v2p-color-main-800);text-decoration:none}#Main .cell .topic-link:visited{color:var(--v2p-color-main-400)}#Main .cell .topic_info{position:relative;user-select:none}#Main .cell .topic_info::after{position:absolute;top:0;right:0;bottom:-6px;left:0;z-index:1;background-color:var(--v2p-color-content-bg);content:""}#Main .cell .topic_info .votes,#Main .cell .topic_info .node,#Main .cell .topic_info strong:first-of-type,#Main .cell .topic_info span:first-of-type{position:relative;z-index:99}#Main .cell .topic_info a[href^="/member"]{color:var(--v2p-color-main-500);font-weight:500}#Main .cell:hover .count_livid{opacity:1}#Main .cell .count_livid{display:inline-block;padding:5px 10px;color:var(--v2p-color-main-400);font-weight:400;font-size:12px;white-space:nowrap;background-color:var(--v2p-color-main-200);border-radius:5px;opacity:.8}#Main .cell .item_title{font-weight:600;opacity:.8}#Main .cell .item_title:hover{opacity:1}#Main .cell.item tr>td:nth-child(2){width:30px}#Main #Tabs{display:flex;flex-wrap:wrap;gap:6px 8px;align-items:center}#Main #Tabs .tab{margin:0}#Main #SecondaryTabs{padding:10px;background-color:var(--v2p-color-main-100);border-radius:5px}#Main .cell[id^=r]:hover>table td:last-of-type .fr a{opacity:1}#Main .cell[id^=r]>table:first-of-type td:first-of-type{width:40px}#Main .cell[id^=r]>table:first-of-type td:first-of-type .avatar{width:40px !important;border-radius:5px}#Main .cell[id^=r]>table~.cell{padding:20px 0 0 15px;border:none}#Main .cell[id^=r]>table~.cell .cell{padding:20px 0 0;border:none}#Main .cell[id^=r]>table~.cell tr td:first-of-type{width:25px}#Main .cell[id^=r]>table~.cell tr td:first-of-type .avatar{width:25px !important;border-radius:4px}#Main .cell[id^=r]>table~.cell tr td:nth-child(3) strong a{font-size:13px;opacity:.75}#Main .cell[id^=r]>table~.cell .reply_content{font-size:14px}#Main .cell[id^=r]>table td:nth-of-type(2){width:15px}#Main .cell[id^=r]>table td:last-of-type a.dark{color:var(--v2p-color-main-600);text-decoration:none}#Main .cell[id^=r]>table td:last-of-type .fr{position:relative;top:-3px;user-select:none}#Main .cell[id^=r]>table td:last-of-type .fr a{opacity:0}#Main .cell[id^=r]>table td:last-of-type .fr+.sep3{height:0}#Main .cell[id^=r]:last-of-type{border:none}#Main .cell[id^=r] .no{position:relative;top:-4px;padding:5px 10px;color:var(--v2p-color-main-300);font-size:12px;background-color:rgba(0,0,0,0);border-radius:5px;user-select:none}#Main .cell[id^=r] .badge{padding:2px 5px;font-weight:600;border:1px solid var(--v2p-color-accent-400);user-select:none}#Main .cell[id^=r] .badge:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}#Main .cell[id^=r] .badge:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px}#Main .cell[id^=r] .badge.op{color:var(--v2p-color-accent-500);background-color:var(--v2p-color-accent-50)}#Main .cell[id^=r] .badge.mod{color:var(--v2p-color-content-bg);background-color:var(--v2p-color-accent-400)}#Main .topic_content a[href^=http],#Main .reply_content a[href^=http]{color:var(--v2p-color-main-500);text-decoration:none;background-color:var(--v2p-color-main-100)}#Main .topic_content a[href^=http]:hover,#Main .reply_content a[href^=http]:hover{color:var(--v2p-color-accent-500);background-color:var(--v2p-color-accent-50)}#Main .reply_content{font-size:15px}#Main .reply_content a[href^=http]{font-size:12px}#Main .reply_content a[href^="/member"]{color:var(--v2p-color-main-400);font-size:13px;text-decoration:underline;background-color:var(--v2p-color-main-100)}#Main .thank_area{font-size:12px}#Main .tab{background-color:rgba(0,0,0,0)}#Main .tab:not(.v2p-hover-btn):hover{background-color:var(--v2p-color-main-100)}#Main .tab_current{background-color:var(--v2p-color-main-700)}.topic_buttons{display:flex;flex-direction:row-reverse;align-items:center;padding:8px 0;column-gap:5px;background:none}.topic_buttons .topic_stats{margin-left:auto;padding:0 !important;font-size:12px;text-shadow:none}.topic_buttons a.tb:link{display:flex;flex-direction:row-reverse;align-items:center;padding:5px;column-gap:5px;background:none;border-radius:4px}.topic_buttons .tb:hover:not(.v2p-hover-btn){background:var(--v2p-color-main-100);filter:none}.topic_buttons .tb:nth-child(1)::after{content:"\u{1F64F}"}.topic_buttons .tb:nth-child(2)::after{content:"\u2B50"}.topic_buttons .tb:nth-child(3)::after{content:"\u{1F426}"}.topic_buttons .tb:nth-child(4)::after{content:"\u{1F648}"}#Rightbar .box{opacity:.5;transition:opacity .25s}#Rightbar .box:hover{opacity:1}#Rightbar .balance_area{display:flex;align-items:center}#Bottom .inner .small.fade{display:none}#Bottom a.dark:link{color:var(--v2p-color-main-600)}body.modal-open{overflow:hidden}.v2p-hover-btn{position:relative;z-index:1;margin:0;background:none;background-color:rgba(0,0,0,0);cursor:pointer;user-select:none}.v2p-hover-btn::before{position:absolute;top:0;right:-5px;bottom:0;left:-5px;z-index:-1;background-color:var(--v2p-color-main-100);border-radius:5px;transform:scale(0.6);opacity:0;transition:background-color .3s,transform .3s,opacity .3s;content:""}.v2p-hover-btn:hover::before{transform:scale(1);opacity:1}.v2p-icon-heart{display:inline-flex;width:16px;height:16px;color:var(--v2p-color-heart)}.v2p-icon-heart svg{fill:var(--v2p-color-heart-fill)}#Main>.box>.cell>.gray:has(.v2p-popular-btn){display:inline-flex;align-items:center}.v2p-popular-btn{display:inline-flex;align-items:center;justify-content:center;padding:5px 0}.v2p-popular-btn:hover .v2p-icon-heart{color:var(--v2p-color-heart);transition:color .3s,fill .3s}.v2p-popular-btn .v2p-icon-heart{margin-right:5px;color:currentcolor}.v2p-popular-btn .v2p-icon-heart svg{fill:none}.v2p-dot{margin:0 8px;font-weight:800;font-size:20px;font-size:15px}.v2p-paging{background:none !important}.v2p-cm-mask{position:fixed;z-index:999;padding:60px;overflow:hidden;overflow-y:auto;background-color:rgba(0,0,0,.25);inset:0}.v2p-cm-content.box{position:relative;box-sizing:border-box;width:800px;height:100%;margin:0 auto;padding:0 20px;overflow-x:hidden;overflow-y:auto}.v2p-cm-content.box .v2p-controls>a:has(.v2p-ac-reply){cursor:not-allowed;pointer-events:none}.v2p-cm-content.box .no{pointer-events:none}.v2p-cm-bar{position:sticky;top:0;right:0;left:0;z-index:10;display:flex;align-items:center;padding:15px 0 20px;background-color:var(--v2p-color-content-bg)}.v2p-cm-close-btn{margin-left:auto}.heart-box{position:relative;top:3px;display:inline-flex;align-items:center;column-gap:5px}@supports not selector(:has(*)){#Main .cell[id^=r]>table:hover .v2p-controls{opacity:1}}@supports selector(:has(*)){#Main .cell[id^=r]:not(:has(.cell:hover))>table:hover .v2p-controls{opacity:1}}.v2p-controls{display:inline-flex;align-items:center;margin-right:15px;font-size:12px;column-gap:15px;opacity:0}.v2p-controls>a{text-decoration:none;opacity:1}.v2p-control{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;padding:4px 0;color:var(--v2p-color-main-400)}.topic_buttons .v2p-tb.v2p-hover-btn{color:var(--v2p-color-main-400);transition:color .3s}.topic_buttons .v2p-tb.v2p-hover-btn:hover{color:currentcolor}.topic_buttons .v2p-tb.v2p-hover-btn::after{display:none}.v2p-tb-icon{width:15px;height:15px}#v2p-tooltip{position:absolute;top:0;left:0;z-index:999;width:max-content;padding:12px;color:var(--v2p-color-main-600);font-weight:bold;font-size:14px;background:var(--v2p-color-content-bg);border-radius:5px;box-shadow:var(--v2p-box-shadow);visibility:hidden}#v2p-tooltip-arrow{position:absolute;width:8px;height:8px;background:inherit;transform:rotate(45deg)}.v2p-emoticons{display:grid;grid-template-columns:repeat(6, 1fr);gap:8px}
`;function ut(){$(`<style type='text/css'>${Gt}</style>`).appendTo("head")}var mt=$('#Top .tools > a[href^="/member"]').text(),vt=$("#Main .box:has(.topic_content)"),B=$('#Main .box:has(.cell[id^="r_"])'),A=B.find('.cell[id^="r_"]'),j=A.find("> table > tbody > tr"),q=j.map((t,o)=>{let n=A[t].id,e=$(o).find("> td:nth-child(3)"),r=e.find("> strong > a"),i=r.text(),c=r.prop("href"),a=e.find("> .reply_content").text(),l=Number(e.find("span.small").text()),p=e.find("span.no").text(),f=Array.from(a.matchAll(/@(\S+)\s/g)),s=f.length>0?f.map(([,d])=>d):void 0;return{id:n,memberName:i,memberLink:c,content:a,likes:l,floor:p,index:t,refNames:s}}).get();function gt(){let t=window.navigator.userAgent.toLowerCase(),o=/(macintosh|macintel|macppc|mac68k|macos)/i,n=/(win32|win64|windows|wince)/i,e=/(iphone|ipad|ipod)/i,r=null;return o.test(t)?r="macos":e.test(t)?r="ios":n.test(t)?r="windows":t.includes("android")?r="android":t.includes("linux")&&(r="linux"),r}function Y(t){return t.split("-")[1]}function xt(t){return t==="y"?"height":"width"}function E(t){return t.split("-")[0]}function G(t){return["top","bottom"].includes(E(t))?"x":"y"}function ht(t,o,n){let{reference:e,floating:r}=t,i=e.x+e.width/2-r.width/2,c=e.y+e.height/2-r.height/2,a=G(o),l=xt(a),p=e[l]/2-r[l]/2,f=E(o),s=a==="x",d;switch(f){case"top":d={x:i,y:e.y-r.height};break;case"bottom":d={x:i,y:e.y+e.height};break;case"right":d={x:e.x+e.width,y:c};break;case"left":d={x:e.x-r.width,y:c};break;default:d={x:e.x,y:e.y}}switch(Y(o)){case"start":d[a]-=p*(n&&s?-1:1);break;case"end":d[a]+=p*(n&&s?-1:1);break}return d}var wt=async(t,o,n)=>{let{placement:e="bottom",strategy:r="absolute",middleware:i=[],platform:c}=n,a=i.filter(Boolean),l=await(c.isRTL==null?void 0:c.isRTL(o)),p=await c.getElementRects({reference:t,floating:o,strategy:r}),{x:f,y:s}=ht(p,e,l),d=e,u={},m=0;for(let b=0;b<a.length;b++){let{name:v,fn:g}=a[b],{x:h,y:x,data:y,reset:w}=await g({x:f,y:s,initialPlacement:e,placement:d,strategy:r,middlewareData:u,rects:p,platform:c,elements:{reference:t,floating:o}});if(f=h??f,s=x??s,u={...u,[v]:{...u[v],...y}},w&&m<=50){m++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(p=w.rects===!0?await c.getElementRects({reference:t,floating:o,strategy:r}):w.rects),{x:f,y:s}=ht(p,d,l)),b=-1;continue}}return{x:f,y:s,placement:d,strategy:r,middlewareData:u}};function Jt(t){return{top:0,right:0,bottom:0,left:0,...t}}function Kt(t){return typeof t!="number"?Jt(t):{top:t,right:t,bottom:t,left:t}}function U(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function et(t,o){var n;o===void 0&&(o={});let{x:e,y:r,platform:i,rects:c,elements:a,strategy:l}=t,{boundary:p="clippingAncestors",rootBoundary:f="viewport",elementContext:s="floating",altBoundary:d=!1,padding:u=0}=o,m=Kt(u),v=a[d?s==="floating"?"reference":"floating":s],g=U(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:p,rootBoundary:f,strategy:l})),h=s==="floating"?{...c.floating,x:e,y:r}:c.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),y=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},w=U(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:h,offsetParent:x,strategy:l}):h);return{top:(g.top-w.top+m.top)/y.y,bottom:(w.bottom-g.bottom+m.bottom)/y.y,left:(g.left-w.left+m.left)/y.x,right:(w.right-g.right+m.right)/y.x}}var Qt=Math.min,Zt=Math.max;function bt(t,o,n){return Zt(t,Qt(o,n))}var to={left:"right",right:"left",bottom:"top",top:"bottom"};function X(t){return t.replace(/left|right|bottom|top/g,o=>to[o])}function oo(t,o,n){n===void 0&&(n=!1);let e=Y(t),r=G(t),i=xt(r),c=r==="x"?e===(n?"end":"start")?"right":"left":e==="start"?"bottom":"top";return o.reference[i]>o.floating[i]&&(c=X(c)),{main:c,cross:X(c)}}var eo={start:"end",end:"start"};function ot(t){return t.replace(/start|end/g,o=>eo[o])}function no(t){let o=X(t);return[ot(t),o,ot(o)]}function ro(t,o,n){let e=["left","right"],r=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return n?o?r:e:o?e:r;case"left":case"right":return o?i:c;default:return[]}}function io(t,o,n,e){let r=Y(t),i=ro(E(t),n==="start",e);return r&&(i=i.map(c=>c+"-"+r),o&&(i=i.concat(i.map(ot)))),i}var nt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(o){var n;let{placement:e,middlewareData:r,rects:i,initialPlacement:c,platform:a,elements:l}=o,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:s,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:u="none",flipAlignment:m=!0,...b}=t,v=E(e),g=E(c)===c,h=await(a.isRTL==null?void 0:a.isRTL(l.floating)),x=s||(g||!m?[X(c)]:no(c));!s&&u!=="none"&&x.push(...io(c,m,u,h));let y=[c,...x],w=await et(o,b),O=[],N=((n=r.flip)==null?void 0:n.overflows)||[];if(p&&O.push(w[v]),f){let{main:S,cross:I}=oo(e,i,h);O.push(w[S],w[I])}if(N=[...N,{placement:e,overflows:O}],!O.every(S=>S<=0)){var st,pt;let S=(((st=r.flip)==null?void 0:st.index)||0)+1,I=y[S];if(I)return{data:{index:S,overflows:N},reset:{placement:I}};let D=(pt=N.filter(L=>L.overflows[0]<=0).sort((L,P)=>L.overflows[1]-P.overflows[1])[0])==null?void 0:pt.placement;if(!D)switch(d){case"bestFit":{var dt;let L=(dt=N.map(P=>[P.placement,P.overflows.filter(F=>F>0).reduce((F,Yt)=>F+Yt,0)]).sort((P,F)=>P[1]-F[1])[0])==null?void 0:dt[0];L&&(D=L);break}case"initialPlacement":D=c;break}if(e!==D)return{reset:{placement:D}}}return{}}}};async function co(t,o){let{placement:n,platform:e,elements:r}=t,i=await(e.isRTL==null?void 0:e.isRTL(r.floating)),c=E(n),a=Y(n),l=G(n)==="x",p=["left","top"].includes(c)?-1:1,f=i&&l?-1:1,s=typeof o=="function"?o(t):o,{mainAxis:d,crossAxis:u,alignmentAxis:m}=typeof s=="number"?{mainAxis:s,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...s};return a&&typeof m=="number"&&(u=a==="end"?m*-1:m),l?{x:u*f,y:d*p}:{x:d*p,y:u*f}}var rt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(o){let{x:n,y:e}=o,r=await co(o,t);return{x:n+r.x,y:e+r.y,data:r}}}};function ao(t){return t==="x"?"y":"x"}var it=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(o){let{x:n,y:e,placement:r}=o,{mainAxis:i=!0,crossAxis:c=!1,limiter:a={fn:v=>{let{x:g,y:h}=v;return{x:g,y:h}}},...l}=t,p={x:n,y:e},f=await et(o,l),s=G(E(r)),d=ao(s),u=p[s],m=p[d];if(i){let v=s==="y"?"top":"left",g=s==="y"?"bottom":"right",h=u+f[v],x=u-f[g];u=bt(h,u,x)}if(c){let v=d==="y"?"top":"left",g=d==="y"?"bottom":"right",h=m+f[v],x=m-f[g];m=bt(h,m,x)}let b=a.fn({...o,[s]:u,[d]:m});return{...b,data:{x:b.x-n,y:b.y-e}}}}};function k(t){var o;return((o=t.ownerDocument)==null?void 0:o.defaultView)||window}function M(t){return k(t).getComputedStyle(t)}var yt=Math.min,V=Math.max,K=Math.round;function Rt(t){let o=M(t),n=parseFloat(o.width),e=parseFloat(o.height),r=t.offsetWidth,i=t.offsetHeight,c=K(n)!==r||K(e)!==i;return c&&(n=r,e=i),{width:n,height:e,fallback:c}}function R(t){return Tt(t)?(t.nodeName||"").toLowerCase():""}var J;function _t(){if(J)return J;let t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(J=t.brands.map(o=>o.brand+"/"+o.version).join(" "),J):navigator.userAgent}function C(t){return t instanceof k(t).HTMLElement}function _(t){return t instanceof k(t).Element}function Tt(t){return t instanceof k(t).Node}function kt(t){if(typeof ShadowRoot>"u")return!1;let o=k(t).ShadowRoot;return t instanceof o||t instanceof ShadowRoot}function Q(t){let{overflow:o,overflowX:n,overflowY:e,display:r}=M(t);return/auto|scroll|overlay|hidden|clip/.test(o+e+n)&&!["inline","contents"].includes(r)}function lo(t){return["table","td","th"].includes(R(t))}function ct(t){let o=/firefox/i.test(_t()),n=M(t),e=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||(e?e!=="none":!1)||o&&n.willChange==="filter"||o&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(r=>n.willChange.includes(r))||["paint","layout","strict","content"].some(r=>{let i=n.contain;return i!=null?i.includes(r):!1})}function at(){return/^((?!chrome|android).)*safari/i.test(_t())}function lt(t){return["html","body","#document"].includes(R(t))}function Ot(t){return _(t)?t:t.contextElement}var Et={x:1,y:1};function z(t){let o=Ot(t);if(!C(o))return Et;let n=o.getBoundingClientRect(),{width:e,height:r,fallback:i}=Rt(o),c=(i?K(n.width):n.width)/e,a=(i?K(n.height):n.height)/r;return(!c||!Number.isFinite(c))&&(c=1),(!a||!Number.isFinite(a))&&(a=1),{x:c,y:a}}function H(t,o,n,e){var r,i;o===void 0&&(o=!1),n===void 0&&(n=!1);let c=t.getBoundingClientRect(),a=Ot(t),l=Et;o&&(e?_(e)&&(l=z(e)):l=z(t));let p=a?k(a):window,f=at()&&n,s=(c.left+(f&&((r=p.visualViewport)==null?void 0:r.offsetLeft)||0))/l.x,d=(c.top+(f&&((i=p.visualViewport)==null?void 0:i.offsetTop)||0))/l.y,u=c.width/l.x,m=c.height/l.y;if(a){let b=k(a),v=e&&_(e)?k(e):e,g=b.frameElement;for(;g&&e&&v!==b;){let h=z(g),x=g.getBoundingClientRect(),y=getComputedStyle(g);x.x+=(g.clientLeft+parseFloat(y.paddingLeft))*h.x,x.y+=(g.clientTop+parseFloat(y.paddingTop))*h.y,s*=h.x,d*=h.y,u*=h.x,m*=h.y,s+=x.x,d+=x.y,g=k(g).frameElement}}return{width:u,height:m,top:d,right:s+u,bottom:d+m,left:s,x:s,y:d}}function T(t){return((Tt(t)?t.ownerDocument:t.document)||window.document).documentElement}function Z(t){return _(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function so(t){let{rect:o,offsetParent:n,strategy:e}=t,r=C(n),i=T(n);if(n===i)return o;let c={scrollLeft:0,scrollTop:0},a={x:1,y:1},l={x:0,y:0};if((r||!r&&e!=="fixed")&&((R(n)!=="body"||Q(i))&&(c=Z(n)),C(n))){let p=H(n);a=z(n),l.x=p.x+n.clientLeft,l.y=p.y+n.clientTop}return{width:o.width*a.x,height:o.height*a.y,x:o.x*a.x-c.scrollLeft*a.x+l.x,y:o.y*a.y-c.scrollTop*a.y+l.y}}function $t(t){return H(T(t)).left+Z(t).scrollLeft}function po(t){let o=T(t),n=Z(t),e=t.ownerDocument.body,r=V(o.scrollWidth,o.clientWidth,e.scrollWidth,e.clientWidth),i=V(o.scrollHeight,o.clientHeight,e.scrollHeight,e.clientHeight),c=-n.scrollLeft+$t(t),a=-n.scrollTop;return M(e).direction==="rtl"&&(c+=V(o.clientWidth,e.clientWidth)-r),{width:r,height:i,x:c,y:a}}function W(t){if(R(t)==="html")return t;let o=t.assignedSlot||t.parentNode||kt(t)&&t.host||T(t);return kt(o)?o.host:o}function St(t){let o=W(t);return lt(o)?o.ownerDocument.body:C(o)&&Q(o)?o:St(o)}function Lt(t,o){var n;o===void 0&&(o=[]);let e=St(t),r=e===((n=t.ownerDocument)==null?void 0:n.body),i=k(e);return r?o.concat(i,i.visualViewport||[],Q(e)?e:[]):o.concat(e,Lt(e))}function fo(t,o){let n=k(t),e=T(t),r=n.visualViewport,i=e.clientWidth,c=e.clientHeight,a=0,l=0;if(r){i=r.width,c=r.height;let p=at();(!p||p&&o==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:i,height:c,x:a,y:l}}function uo(t,o){let n=H(t,!0,o==="fixed"),e=n.top+t.clientTop,r=n.left+t.clientLeft,i=C(t)?z(t):{x:1,y:1},c=t.clientWidth*i.x,a=t.clientHeight*i.y,l=r*i.x,p=e*i.y;return{width:c,height:a,x:l,y:p}}function Mt(t,o,n){let e;if(o==="viewport")e=fo(t,n);else if(o==="document")e=po(T(t));else if(_(o))e=uo(o,n);else{let c={...o};if(at()){var r,i;let a=k(t);c.x-=((r=a.visualViewport)==null?void 0:r.offsetLeft)||0,c.y-=((i=a.visualViewport)==null?void 0:i.offsetTop)||0}e=c}return U(e)}function mo(t,o){let n=o.get(t);if(n)return n;let e=Lt(t).filter(a=>_(a)&&R(a)!=="body"),r=null,i=M(t).position==="fixed",c=i?W(t):t;for(;_(c)&&!lt(c);){let a=M(c),l=ct(c);a.position==="fixed"?r=null:(i?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position))?e=e.filter(s=>s!==c):r=a,c=W(c)}return o.set(t,e),e}function vo(t){let{element:o,boundary:n,rootBoundary:e,strategy:r}=t,c=[...n==="clippingAncestors"?mo(o,this._c):[].concat(n),e],a=c[0],l=c.reduce((p,f)=>{let s=Mt(o,f,r);return p.top=V(s.top,p.top),p.right=yt(s.right,p.right),p.bottom=yt(s.bottom,p.bottom),p.left=V(s.left,p.left),p},Mt(o,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function go(t){return C(t)?Rt(t):t.getBoundingClientRect()}function Ct(t,o){return!C(t)||M(t).position==="fixed"?null:o?o(t):t.offsetParent}function ho(t){let o=W(t);for(;C(o)&&!lt(o);){if(ct(o))return o;o=W(o)}return null}function At(t,o){let n=k(t),e=Ct(t,o);for(;e&&lo(e)&&M(e).position==="static";)e=Ct(e,o);return e&&(R(e)==="html"||R(e)==="body"&&M(e).position==="static"&&!ct(e))?n:e||ho(t)||n}function bo(t,o,n){let e=C(o),r=T(o),i=H(t,!0,n==="fixed",o),c={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(e||!e&&n!=="fixed")if((R(o)!=="body"||Q(r))&&(c=Z(o)),C(o)){let l=H(o,!0);a.x=l.x+o.clientLeft,a.y=l.y+o.clientTop}else r&&(a.x=$t(r));return{x:i.left+c.scrollLeft-a.x,y:i.top+c.scrollTop-a.y,width:i.width,height:i.height}}var xo={getClippingRect:vo,convertOffsetParentRelativeRectToViewportRelativeRect:so,isElement:_,getDimensions:go,getOffsetParent:At,getDocumentElement:T,getScale:z,async getElementRects(t){let{reference:o,floating:n,strategy:e}=t,r=this.getOffsetParent||At,i=this.getDimensions;return{reference:bo(o,await r(n),e),floating:{x:0,y:0,...await i(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>M(t).direction==="rtl"};var Pt=(t,o,n)=>{let e=new Map,r={platform:xo,...n},i={...r.platform,_c:e};return wt(t,o,{...r,platform:i})};var Bt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
  stroke-width="1.5"
  stroke="currentColor"
  style="width:18px; height:18px;"
>
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    d="M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"
  />
</svg>
`,tt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
  stroke-width="1.5"
  stroke="currentColor"
>
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"
  />
</svg>
`,zt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
  stroke-width="1.5"
  stroke="currentColor"
>
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"
  />
</svg>
`,Nt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
  stroke-width="1.5"
  stroke="currentColor"
>
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"
  />
</svg>
`,Dt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <polygon
    points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
  ></polygon>
</svg>
`,Ft=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path
    d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"
  ></path>
</svg>
`,jt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <circle cx="12" cy="12" r="10"></circle>
  <path d="M8 15h8"></path>
  <path d="M8 9h2"></path>
  <path d="M14 9h2"></path>
</svg>
`,Vt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path
    d="M20.42 4.58a5.4 5.4 0 0 0-7.65 0l-.77.78-.77-.78a5.4 5.4 0 0 0-7.65 0C1.46 6.7 1.33 10.28 4 13l8 8 8-8c2.67-2.72 2.54-6.3.42-8.42z"
  ></path>
</svg>
`;function Ht(){vt.find(".topic_content a[href]").prop("target","_blank");let t=q.filter(({likes:o})=>o>0).sort((o,n)=>n.likes-o.likes);if(t.length>4||t.length>0&&t.every(({likes:o})=>o>=4)){let o=$('<div class="v2p-cm-mask">'),n=$(`
      <div class="v2p-cm-content box">
        <div class="v2p-cm-bar">
          <span>\u672C\u9875\u5171\u6709 ${t.length} \u6761\u70ED\u95E8\u56DE\u590D</span>
          <button class="v2p-cm-close-btn normal button">\u5173\u95ED<kbd>Esc</kbd></button>
        </div>
      </div>
    `),e=o.append(n).hide();{let i=B.find(".cell:first-of-type > span.gray"),c=i.text(),l=`<span class="count-text">${c.substring(0,c.indexOf("\u56DE\u590D")+2)}</span><span class="v2p-dot">\xB7</span>`,p=!1,f=v=>{$(v.target).closest(n).length===0&&d()},s=v=>{v.key==="Escape"&&d()},d=()=>{$(document).off("click",f),$(document).off("keydown",s),p=!1,e.fadeOut("fast"),document.body.classList.remove("modal-open")},u=()=>{p||($(document).on("click",f),$(document).on("keydown",s),p=!0),e.fadeIn("fast"),document.body.classList.add("modal-open")};e.find(".v2p-cm-close-btn").on("click",d);let b=$(`<span class="v2p-popular-btn v2p-hover-btn"><span class="v2p-icon-heart">${tt}</span>\u67E5\u770B\u672C\u9875\u611F\u8C22\u56DE\u590D</span>`);b.on("click",v=>{v.stopPropagation(),u()}),i.empty().append(l).append(b)}let r=$("<templete></templete>");t.forEach(({index:i})=>{r.append(A.eq(i).clone())}),n.append(r.html()),B.append(e)}}function Wt(){A.find(".small.fade").addClass("heart-box").find('img[alt="\u2764\uFE0F"]').replaceWith(`<span class="v2p-icon-heart">${tt}</span>`)}function It(){let t=gt(),o=$(`<button class="normal button">\u56DE\u590D<kbd>${t==="macos"?"Cmd":"Ctrl"}+Enter</kbd></button>`).replaceAll($('#reply-box input[type="submit"]')),n=["\u{1F929}","\u{1F602}","\u{1F605}","\u{1F973}","\u{1F600}","\u{1F436}","\u{1F414}","\u{1F921}","\u{1F4A9}"],e=$(`
    <div class="v2p-emoticons">
      ${n.map(s=>`<span>${s}</span>`).join("")}
    </div>
  `),r=$(`<button type="button" class="normal button">${Bt}</button>`).insertAfter(o),i=$('<button type="button" class="normal button">\u9690\u85CF</button>'),a=$('<div id="v2p-tooltip" role="tooltip"></div>').append(e,i).appendTo($("#reply-box")).get(0);i.on("click",()=>{a.style.visibility="hidden"});let l=()=>{Pt(r.get(0),a,{placement:"bottom",middleware:[rt(6),nt(),it({padding:8})]}).then(({x:s,y:d})=>{Object.assign(a.style,{left:`${s}px`,top:`${d}px`}),a.style.visibility="visible"})};r.on("click",l),j.find("> td:last-of-type > .fr").each((s,d)=>{let u=$(d),m=$('<span class="v2p-controls">'),b=$(`<span class="v2p-control">${tt}</span>`),v=u.find("> .thank_area");if(v.hasClass("thanked"))b.prop("title","\u5DF2\u611F\u8C22").css({color:"#f43f5e",cursor:"default"}),m.append($("<a>").append(b));else{let y=v.find("> .thank"),w=y.eq(0).removeClass("thank"),O=y.eq(1).removeClass("thank");w.html(`<span class="v2p-control v2p-hover-btn" title="\u9690\u85CF">${zt}</span>`),b.prop("title","\u611F\u8C22").addClass("v2p-hover-btn"),O.empty().append(b),m.append(w).append(O)}let h=u.find("a:last-of-type");h.find('> img[alt="Reply"]').replaceWith(`<span class="v2p-control v2p-ac-reply v2p-hover-btn" title="\u56DE\u590D">${Nt}</span>`),m.append(h),v.remove();let x=u.find(".no").clone();u.empty().append(m,x)});let f=$(".topic_buttons .tb").addClass("v2p-tb");f.eq(0).append(`<span class="v2p-tb-icon">${Dt}</span>`),f.eq(1).append(`<span class="v2p-tb-icon">${Ft}</span>`),f.eq(2).append(`<span class="v2p-tb-icon">${jt}</span>`),f.eq(3).append(`<span class="v2p-tb-icon">${Vt}</span>`)}function qt(){let t=$("#Main > .box:nth-child(1) > .header > small > a").text(),o=1;for(;o<A.length;){let n=A[o],{memberName:e,content:r}=q[o];if(e===t&&n.classList.add("owner"),e===mt&&n.classList.add("self"),r.includes("@")){for(let i=o-1;i>=0;i--)if(r.match(`@${q[i].memberName}`)){n.classList.add("responder"),A[i].append(n);break}}o++}}function Ut(){let t=B.find('> .cell:not([id^="r_"])');if(t.length<=1)return;let n=t.slice(1).addClass("v2p-paging").find(".super.button");n.eq(0).addClass("v2p-prev-btn"),n.eq(1).addClass("v2p-next-btn")}function Xt(){j.find("> td:nth-child(3) > strong > a").prop("target","_blank"),Wt(),It(),Ht(),qt(),Ut()}$("#Top .site-nav .tools > .top").addClass("v2p-hover-btn");ut();ft();Xt();
