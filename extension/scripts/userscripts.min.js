"use strict";function ut(){$("#Main .tab").addClass("v2p-hover-btn"),$("#Main .topic_buttons a.tb").addClass("v2p-hover-btn"),$('#Main .topic-link, .item_hot_topic_title > a, .item_node, a[href="/write"]').prop("target","_blank")}var xe=$('#Top .tools > a[href^="/member"]').text(),ve=$("#Main > .box:nth-child(1) > .header > small > a").text(),et=$("#Main .box:has(.topic_content)"),B=$('#Main .box:has(.cell[id^="r_"])'),R=B.find('.cell[id^="r_"]'),H=R.find("> table > tbody > tr"),V=H.map((t,e)=>{let o=R[t].id,n=$(e).find("> td:nth-child(3)"),i=n.find("> strong > a"),s=i.text(),r=i.prop("href"),c=n.find("> .reply_content").text(),a=Number(n.find("span.small").text()),f=n.find("span.no").text(),p=Array.from(c.matchAll(/@(\S+)\s/g)),l=p.length>0?p.map(([,m])=>m):void 0,d=Array.from(c.matchAll(/#(\d+)/g)),u=d.length>0?d.map(([,m])=>m):void 0;return{id:o,memberName:s,memberLink:r,content:c,likes:a,floor:f,index:t,refMemberNames:l,refFloors:u}}).get();function mt(){let t=window.navigator.userAgent.toLowerCase(),e=/(macintosh|macintel|macppc|mac68k|macos)/i,o=/(win32|win64|windows|wince)/i,n=/(iphone|ipad|ipod)/i,i=null;return e.test(t)?i="macos":n.test(t)?i="ios":o.test(t)?i="windows":t.includes("android")?i="android":t.includes("linux")&&(i="linux"),i}function Y(t){return t.split("-")[1]}function wt(t){return t==="y"?"height":"width"}function P(t){return t.split("-")[0]}function J(t){return["top","bottom"].includes(P(t))?"x":"y"}function ht(t,e,o){let{reference:n,floating:i}=t,s=n.x+n.width/2-i.width/2,r=n.y+n.height/2-i.height/2,c=J(e),a=wt(c),f=n[a]/2-i[a]/2,p=P(e),l=c==="x",d;switch(p){case"top":d={x:s,y:n.y-i.height};break;case"bottom":d={x:s,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:r};break;case"left":d={x:n.x-i.width,y:r};break;default:d={x:n.x,y:n.y}}switch(Y(e)){case"start":d[c]-=f*(o&&l?-1:1);break;case"end":d[c]+=f*(o&&l?-1:1);break}return d}var xt=async(t,e,o)=>{let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:r}=o,c=s.filter(Boolean),a=await(r.isRTL==null?void 0:r.isRTL(e)),f=await r.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:l}=ht(f,n,a),d=n,u={},m=0;for(let x=0;x<c.length;x++){let{name:h,fn:g}=c[x],{x:w,y:v,data:C,reset:y}=await g({x:p,y:l,initialPlacement:n,placement:d,strategy:i,middlewareData:u,rects:f,platform:r,elements:{reference:t,floating:e}});if(p=w??p,l=v??l,u={...u,[h]:{...u[h],...C}},y&&m<=50){m++,typeof y=="object"&&(y.placement&&(d=y.placement),y.rects&&(f=y.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:i}):y.rects),{x:p,y:l}=ht(f,d,a)),x=-1;continue}}return{x:p,y:l,placement:d,strategy:i,middlewareData:u}};function qt(t){return{top:0,right:0,bottom:0,left:0,...t}}function Ut(t){return typeof t!="number"?qt(t):{top:t,right:t,bottom:t,left:t}}function U(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function ot(t,e){var o;e===void 0&&(e={});let{x:n,y:i,platform:s,rects:r,elements:c,strategy:a}=t,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:l="floating",altBoundary:d=!1,padding:u=0}=e,m=Ut(u),h=c[d?l==="floating"?"reference":"floating":l],g=U(await s.getClippingRect({element:(o=await(s.isElement==null?void 0:s.isElement(h)))==null||o?h:h.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:f,rootBoundary:p,strategy:a})),w=l==="floating"?{...r.floating,x:n,y:i}:r.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),C=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},y=U(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:v,strategy:a}):w);return{top:(g.top-y.top+m.top)/C.y,bottom:(y.bottom-g.bottom+m.bottom)/C.y,left:(g.left-y.left+m.left)/C.x,right:(y.right-g.right+m.right)/C.x}}var Xt=Math.min,Yt=Math.max;function gt(t,e,o){return Yt(t,Xt(e,o))}var Jt={left:"right",right:"left",bottom:"top",top:"bottom"};function X(t){return t.replace(/left|right|bottom|top/g,e=>Jt[e])}function Qt(t,e,o){o===void 0&&(o=!1);let n=Y(t),i=J(t),s=wt(i),r=i==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(r=X(r)),{main:r,cross:X(r)}}var Kt={start:"end",end:"start"};function nt(t){return t.replace(/start|end/g,e=>Kt[e])}function Gt(t){let e=X(t);return[nt(t),e,nt(e)]}function Zt(t,e,o){let n=["left","right"],i=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(t){case"top":case"bottom":return o?e?i:n:e?n:i;case"left":case"right":return e?s:r;default:return[]}}function te(t,e,o,n){let i=Y(t),s=Zt(P(t),o==="start",n);return i&&(s=s.map(r=>r+"-"+i),e&&(s=s.concat(s.map(nt)))),s}var it=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;let{placement:n,middlewareData:i,rects:s,initialPlacement:r,platform:c,elements:a}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:l,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:u="none",flipAlignment:m=!0,...x}=t,h=P(n),g=P(r)===r,w=await(c.isRTL==null?void 0:c.isRTL(a.floating)),v=l||(g||!m?[X(r)]:Gt(r));!l&&u!=="none"&&v.push(...te(r,m,u,w));let C=[r,...v],y=await ot(e,x),W=[],N=((o=i.flip)==null?void 0:o.overflows)||[];if(f&&W.push(y[h]),p){let{main:S,cross:q}=Qt(n,s,w);W.push(y[S],y[q])}if(N=[...N,{placement:n,overflows:W}],!W.every(S=>S<=0)){var ft,dt;let S=(((ft=i.flip)==null?void 0:ft.index)||0)+1,q=C[S];if(q)return{data:{index:S,overflows:N},reset:{placement:q}};let D=(dt=N.filter(L=>L.overflows[0]<=0).sort((L,M)=>L.overflows[1]-M.overflows[1])[0])==null?void 0:dt.placement;if(!D)switch(d){case"bestFit":{var pt;let L=(pt=N.map(M=>[M.placement,M.overflows.filter(_=>_>0).reduce((_,Wt)=>_+Wt,0)]).sort((M,_)=>M[1]-_[1])[0])==null?void 0:pt[0];L&&(D=L);break}case"initialPlacement":D=r;break}if(n!==D)return{reset:{placement:D}}}return{}}}};async function ee(t,e){let{placement:o,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),r=P(o),c=Y(o),a=J(o)==="x",f=["left","top"].includes(r)?-1:1,p=s&&a?-1:1,l=typeof e=="function"?e(t):e,{mainAxis:d,crossAxis:u,alignmentAxis:m}=typeof l=="number"?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...l};return c&&typeof m=="number"&&(u=c==="end"?m*-1:m),a?{x:u*p,y:d*f}:{x:d*f,y:u*p}}var st=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){let{x:o,y:n}=e,i=await ee(e,t);return{x:o+i.x,y:n+i.y,data:i}}}};function ne(t){return t==="x"?"y":"x"}var rt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:o,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:r=!1,limiter:c={fn:h=>{let{x:g,y:w}=h;return{x:g,y:w}}},...a}=t,f={x:o,y:n},p=await ot(e,a),l=J(P(i)),d=ne(l),u=f[l],m=f[d];if(s){let h=l==="y"?"top":"left",g=l==="y"?"bottom":"right",w=u+p[h],v=u-p[g];u=gt(w,u,v)}if(r){let h=d==="y"?"top":"left",g=d==="y"?"bottom":"right",w=m+p[h],v=m-p[g];m=gt(w,m,v)}let x=c.fn({...e,[l]:u,[d]:m});return{...x,data:{x:x.x-o,y:x.y-n}}}}};function b(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function k(t){return b(t).getComputedStyle(t)}var vt=Math.min,j=Math.max,K=Math.round;function At(t){let e=k(t),o=parseFloat(e.width),n=parseFloat(e.height),i=t.offsetWidth,s=t.offsetHeight,r=K(o)!==i||K(n)!==s;return r&&(o=i,n=s),{width:o,height:n,fallback:r}}function O(t){return Ot(t)?(t.nodeName||"").toLowerCase():""}var Q;function Rt(){if(Q)return Q;let t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Q=t.brands.map(e=>e.brand+"/"+e.version).join(" "),Q):navigator.userAgent}function A(t){return t instanceof b(t).HTMLElement}function E(t){return t instanceof b(t).Element}function Ot(t){return t instanceof b(t).Node}function yt(t){if(typeof ShadowRoot>"u")return!1;let e=b(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function G(t){let{overflow:e,overflowX:o,overflowY:n,display:i}=k(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function oe(t){return["table","td","th"].includes(O(t))}function ct(t){let e=/firefox/i.test(Rt()),o=k(t),n=o.backdropFilter||o.WebkitBackdropFilter;return o.transform!=="none"||o.perspective!=="none"||(n?n!=="none":!1)||e&&o.willChange==="filter"||e&&(o.filter?o.filter!=="none":!1)||["transform","perspective"].some(i=>o.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{let s=o.contain;return s!=null?s.includes(i):!1})}function lt(){return/^((?!chrome|android).)*safari/i.test(Rt())}function at(t){return["html","body","#document"].includes(O(t))}function Et(t){return E(t)?t:t.contextElement}var Tt={x:1,y:1};function F(t){let e=Et(t);if(!A(e))return Tt;let o=e.getBoundingClientRect(),{width:n,height:i,fallback:s}=At(e),r=(s?K(o.width):o.width)/n,c=(s?K(o.height):o.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!c||!Number.isFinite(c))&&(c=1),{x:r,y:c}}function I(t,e,o,n){var i,s;e===void 0&&(e=!1),o===void 0&&(o=!1);let r=t.getBoundingClientRect(),c=Et(t),a=Tt;e&&(n?E(n)&&(a=F(n)):a=F(t));let f=c?b(c):window,p=lt()&&o,l=(r.left+(p&&((i=f.visualViewport)==null?void 0:i.offsetLeft)||0))/a.x,d=(r.top+(p&&((s=f.visualViewport)==null?void 0:s.offsetTop)||0))/a.y,u=r.width/a.x,m=r.height/a.y;if(c){let x=b(c),h=n&&E(n)?b(n):n,g=x.frameElement;for(;g&&n&&h!==x;){let w=F(g),v=g.getBoundingClientRect(),C=getComputedStyle(g);v.x+=(g.clientLeft+parseFloat(C.paddingLeft))*w.x,v.y+=(g.clientTop+parseFloat(C.paddingTop))*w.y,l*=w.x,d*=w.y,u*=w.x,m*=w.y,l+=v.x,d+=v.y,g=b(g).frameElement}}return{width:u,height:m,top:d,right:l+u,bottom:d+m,left:l,x:l,y:d}}function T(t){return((Ot(t)?t.ownerDocument:t.document)||window.document).documentElement}function Z(t){return E(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ie(t){let{rect:e,offsetParent:o,strategy:n}=t,i=A(o),s=T(o);if(o===s)return e;let r={scrollLeft:0,scrollTop:0},c={x:1,y:1},a={x:0,y:0};if((i||!i&&n!=="fixed")&&((O(o)!=="body"||G(s))&&(r=Z(o)),A(o))){let f=I(o);c=F(o),a.x=f.x+o.clientLeft,a.y=f.y+o.clientTop}return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-r.scrollLeft*c.x+a.x,y:e.y*c.y-r.scrollTop*c.y+a.y}}function Pt(t){return I(T(t)).left+Z(t).scrollLeft}function se(t){let e=T(t),o=Z(t),n=t.ownerDocument.body,i=j(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=j(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight),r=-o.scrollLeft+Pt(t),c=-o.scrollTop;return k(n).direction==="rtl"&&(r+=j(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:r,y:c}}function z(t){if(O(t)==="html")return t;let e=t.assignedSlot||t.parentNode||yt(t)&&t.host||T(t);return yt(e)?e.host:e}function $t(t){let e=z(t);return at(e)?e.ownerDocument.body:A(e)&&G(e)?e:$t(e)}function St(t,e){var o;e===void 0&&(e=[]);let n=$t(t),i=n===((o=t.ownerDocument)==null?void 0:o.body),s=b(n);return i?e.concat(s,s.visualViewport||[],G(n)?n:[]):e.concat(n,St(n))}function re(t,e){let o=b(t),n=T(t),i=o.visualViewport,s=n.clientWidth,r=n.clientHeight,c=0,a=0;if(i){s=i.width,r=i.height;let f=lt();(!f||f&&e==="fixed")&&(c=i.offsetLeft,a=i.offsetTop)}return{width:s,height:r,x:c,y:a}}function ce(t,e){let o=I(t,!0,e==="fixed"),n=o.top+t.clientTop,i=o.left+t.clientLeft,s=A(t)?F(t):{x:1,y:1},r=t.clientWidth*s.x,c=t.clientHeight*s.y,a=i*s.x,f=n*s.y;return{width:r,height:c,x:a,y:f}}function bt(t,e,o){let n;if(e==="viewport")n=re(t,o);else if(e==="document")n=se(T(t));else if(E(e))n=ce(e,o);else{let r={...e};if(lt()){var i,s;let c=b(t);r.x-=((i=c.visualViewport)==null?void 0:i.offsetLeft)||0,r.y-=((s=c.visualViewport)==null?void 0:s.offsetTop)||0}n=r}return U(n)}function le(t,e){let o=e.get(t);if(o)return o;let n=St(t).filter(c=>E(c)&&O(c)!=="body"),i=null,s=k(t).position==="fixed",r=s?z(t):t;for(;E(r)&&!at(r);){let c=k(r),a=ct(r);c.position==="fixed"?i=null:(s?!a&&!i:!a&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position))?n=n.filter(l=>l!==r):i=c,r=z(r)}return e.set(t,n),n}function ae(t){let{element:e,boundary:o,rootBoundary:n,strategy:i}=t,r=[...o==="clippingAncestors"?le(e,this._c):[].concat(o),n],c=r[0],a=r.reduce((f,p)=>{let l=bt(e,p,i);return f.top=j(l.top,f.top),f.right=vt(l.right,f.right),f.bottom=vt(l.bottom,f.bottom),f.left=j(l.left,f.left),f},bt(e,c,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function fe(t){return A(t)?At(t):t.getBoundingClientRect()}function Ct(t,e){return!A(t)||k(t).position==="fixed"?null:e?e(t):t.offsetParent}function de(t){let e=z(t);for(;A(e)&&!at(e);){if(ct(e))return e;e=z(e)}return null}function kt(t,e){let o=b(t),n=Ct(t,e);for(;n&&oe(n)&&k(n).position==="static";)n=Ct(n,e);return n&&(O(n)==="html"||O(n)==="body"&&k(n).position==="static"&&!ct(n))?o:n||de(t)||o}function pe(t,e,o){let n=A(e),i=T(e),s=I(t,!0,o==="fixed",e),r={scrollLeft:0,scrollTop:0},c={x:0,y:0};if(n||!n&&o!=="fixed")if((O(e)!=="body"||G(i))&&(r=Z(e)),A(e)){let a=I(e,!0);c.x=a.x+e.clientLeft,c.y=a.y+e.clientTop}else i&&(c.x=Pt(i));return{x:s.left+r.scrollLeft-c.x,y:s.top+r.scrollTop-c.y,width:s.width,height:s.height}}var ue={getClippingRect:ae,convertOffsetParentRelativeRectToViewportRelativeRect:ie,isElement:E,getDimensions:fe,getOffsetParent:kt,getDocumentElement:T,getScale:F,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t,i=this.getOffsetParent||kt,s=this.getDimensions;return{reference:pe(e,await i(o),n),floating:{x:0,y:0,...await s(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>k(t).direction==="rtl"};var Lt=(t,e,o)=>{let n=new Map,i={platform:ue,...o},s={...i.platform,_c:n};return xt(t,e,{...i,platform:s})};var Mt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
  stroke-width="1.5"
  stroke="currentColor"
  style="width:18px; height:18px;"
>
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    d="M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"
  />
</svg>
`,tt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
  stroke-width="1.5"
  stroke="currentColor"
>
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"
  />
</svg>
`,Bt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
  stroke-width="1.5"
  stroke="currentColor"
>
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"
  />
</svg>
`,Ft=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 24 24"
  stroke-width="1.5"
  stroke="currentColor"
>
  <path
    stroke-linecap="round"
    stroke-linejoin="round"
    d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"
  />
</svg>
`,Nt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <polygon
    points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
  ></polygon>
</svg>
`,Dt=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path
    d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"
  ></path>
</svg>
`,_t=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <circle cx="12" cy="12" r="10"></circle>
  <path d="M8 15h8"></path>
  <path d="M8 9h2"></path>
  <path d="M14 9h2"></path>
</svg>
`,Ht=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path
    d="M20.42 4.58a5.4 5.4 0 0 0-7.65 0l-.77.78-.77-.78a5.4 5.4 0 0 0-7.65 0C1.46 6.7 1.33 10.28 4 13l8 8 8-8c2.67-2.72 2.54-6.3.42-8.42z"
  ></path>
</svg>
`;function me(){let t=V.filter(({likes:e})=>e>0).sort((e,o)=>o.likes-e.likes);if(t.length>=4||t.length>0&&t.every(({likes:e})=>e>=4)){let e=$('<div class="v2p-cm-mask">'),o=$(`
      <div class="v2p-cm-content box">
        <div class="v2p-cm-bar">
          <span>\u672C\u9875\u5171\u6709 ${t.length} \u6761\u70ED\u95E8\u56DE\u590D</span>
          <button class="v2p-cm-close-btn normal button">\u5173\u95ED<kbd>Esc</kbd></button>
        </div>
      </div>
    `),n=e.append(o).hide();{let s=B.find(".cell:first-of-type > span.gray"),r=s.text(),a=`<span class="count-text">${r.substring(0,r.indexOf("\u56DE\u590D")+2)}</span><span class="v2p-dot">\xB7</span>`,f=!1,p=h=>{$(h.target).closest(o).length===0&&d()},l=h=>{h.key==="Escape"&&d()},d=()=>{$(document).off("click",p),$(document).off("keydown",l),f=!1,n.fadeOut("fast"),document.body.classList.remove("modal-open")},u=()=>{f||($(document).on("click",p),$(document).on("keydown",l),f=!0),n.fadeIn("fast"),document.body.classList.add("modal-open")};n.find(".v2p-cm-close-btn").on("click",d);let x=$(`<span class="v2p-popular-btn v2p-hover-btn"><span class="v2p-icon-heart">${tt}</span>\u67E5\u770B\u672C\u9875\u611F\u8C22\u56DE\u590D</span>`);x.on("click",h=>{h.stopPropagation(),u()}),s.empty().append(a).append(x)}let i=$("<templete></templete>");t.forEach(({index:s})=>{i.append(R.eq(s).clone())}),o.append(i.html()),B.append(n)}}function he(){H.find("> td:last-of-type > .fr").each((e,o)=>{let n=$(o),i=$('<span class="v2p-controls">'),s=$(`<span class="v2p-control">${tt}</span>`),r=n.find("> .thank_area");if(r.hasClass("thanked"))s.prop("title","\u5DF2\u611F\u8C22").css({color:"#f43f5e",cursor:"default"}),i.append($("<a>").append(s));else{let p=r.find("> .thank"),l=p.eq(0).removeClass("thank"),d=p.eq(1).removeClass("thank");l.html(`<span class="v2p-control v2p-hover-btn" title="\u9690\u85CF">${Bt}</span>`),s.prop("title","\u611F\u8C22").addClass("v2p-hover-btn"),d.empty().append(s),i.append(l).append(d)}let a=n.find("a:last-of-type");a.find('> img[alt="Reply"]').replaceWith(`<span class="v2p-control v2p-ac-reply v2p-hover-btn" title="\u56DE\u590D">${Ft}</span>`),i.append(a),r.remove();let f=n.find(".no").clone();n.empty().append(i,f)})}function ge(){let t=mt(),e=window.document.querySelector("#reply_content"),o=$(`<button class="normal button">\u56DE\u590D<kbd>${t==="macos"?"Cmd":"Ctrl"}+Enter</kbd></button>`).replaceAll($('#reply-box input[type="submit"]')),n=["\u{1F600}","\u{1F603}","\u{1F604}","\u{1F601}","\u{1F606}","\u{1F605}","\u{1F923}","\u{1F602}","\u{1F642}","\u{1F643}","\u{1F609}","\u{1F62E}","\u{1F632}","\u{1F633}","\u{1F631}","\u{1F62D}","\u{1F61E}","\u{1F613}","\u{1F629}","\u{1F621}","\u{1F4A9}","\u{1F921}","\u{1F47B}","\u{1F61A}","\u{1F92D}","\u{1F60F}","\u{1F612}","\u{1F44B}","\u{1F91A}","\u{1F590}","\u{1F596}","\u{1F436}","\u{1F414}","\u{1F921}","\u{1F4A9}"],i=$('<span class="v2p-emoji">'),s=$('<div class="v2p-emoticons">').append(...n.map(l=>i.clone().text(l).on("click",()=>{if(e instanceof HTMLTextAreaElement){let u=e.selectionStart,m=e.selectionEnd,x=e.value.substring(0,u),h=e.value.substring(m,e.value.length);e.value=`${x}${l}${h}`,e.focus(),e.selectionStart=e.selectionEnd=u+l.length}}))),r=$(`<button type="button" class="normal button">${Mt}</button>`).insertAfter(o),c=$('<div id="v2p-tooltip" role="tooltip"></div>').append(s).appendTo($("#reply-box")).get(0),a=l=>{$(l.target).closest(c).length===0&&f()},f=()=>{$(document).off("click",a),c.style.visibility="hidden"},p=()=>{$(document).on("click",a),Lt(r.get(0),c,{placement:"right-start",middleware:[st(6),it(),rt({padding:8})]}).then(({x:l,y:d})=>{Object.assign(c.style,{left:`${l}px`,top:`${d}px`}),c.style.visibility="visible"}).catch(()=>{f()})};r.on("click",l=>{l.stopPropagation(),p(),e instanceof HTMLTextAreaElement&&e.focus()})}function Vt(){R.find(".small.fade").addClass("v2p-heart-box").find('img[alt="\u2764\uFE0F"]').replaceWith(`<span class="v2p-icon-heart">${tt}</span>`),he(),me(),R.each((t,e)=>{let o=V.find(n=>n.id===e.id);if(o){let{refMemberNames:n,refFloors:i}=o,s=n?.at(0),r=i?.at(0);if(s)for(let c=t-1;c>=0;c--){let{memberName:a,floor:f}=V.at(c)||{};if(a===s){if(r&&r!==f){let p=V.slice(0,c).findIndex(l=>l.floor===r);if(p>=0){R.eq(p).append(e);break}}R.eq(c).append(e);break}}}}),ge()}function jt(){et.find(".topic_content a[href]").prop("target","_blank"),et.find(".subtle > .topic_content").each((t,e)=>{let o=e.textContent;o&&(o.length>=300?e.style.fontSize="13px":o.length>=120&&(e.style.fontSize="14px"))});{let t=$(".topic_buttons .tb").addClass("v2p-tb");t.eq(0).append(`<span class="v2p-tb-icon">${Nt}</span>`),t.eq(1).append(`<span class="v2p-tb-icon">${Dt}</span>`),t.eq(2).append(`<span class="v2p-tb-icon">${_t}</span>`),t.eq(3).append(`<span class="v2p-tb-icon">${Ht}</span>`)}}function It(){let t=B.find('> .cell:not([id^="r_"])');if(t.length<=1)return;let o=t.slice(1).addClass("v2p-paging").find(".super.button");o.eq(0).addClass("v2p-prev-btn"),o.eq(1).addClass("v2p-next-btn")}function zt(){H.find("> td:nth-child(3) > strong > a").prop("target","_blank"),jt(),Vt(),It()}$("#Top .site-nav .tools > .top").addClass("v2p-hover-btn");ut();zt();
