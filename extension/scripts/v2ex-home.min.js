"use strict";var A=$('#Top .tools > a[href^="/member"]').text(),_=$("#Main > .box:nth-child(1) > .header > small > a").text(),f=$("#Main #Tabs ~ .cell.item"),v=$("#Main .box:has(.topic_content)"),g=$('#Main .box:has(.cell[id^="r_"])'),h=g.find('.cell[id^="r_"]'),b=h.find("> table > tbody > tr"),P=b.map((i,l)=>{let c=h[i].id,t=$(l).find("> td:nth-child(3)"),s=t.find("> strong > a"),m=s.text(),n=s.prop("href"),o=t.find("> .reply_content").text(),r=Number(t.find("span.small").text()),e=t.find("span.no").text(),d=Array.from(o.matchAll(/@(\S+)\s/g)),u=d.length>0?d.map(([,a])=>a):void 0,p=Array.from(o.matchAll(/#(\d+)/g)),w=p.length>0?p.map(([,a])=>a):void 0;return{id:c,memberName:m,memberLink:n,content:o,likes:r,floor:e,index:i,refMemberNames:u,refFloors:w}}).get();function x(){localStorage.getItem("v2p_pat")&&f.each((l,c)=>{let t=$(c),s=$('<div class="v2p-topic-index">\u9884\u89C8</div>').on("click",()=>{let n=t.find(".topic-link").attr("href")?.match(/\/(\d+)#/);if(n){let o=n[1],r=localStorage.getItem("v2p_pat");fetch(`${"https://www.v2ex.com/api/v2"}/topics/${o}`,{method:"GET",headers:{Authorization:`Bearer ${r}`}}).then(e=>{console.log(e)}).catch(e=>{console.error(e)})}}).insertAfter(t.find(".count_livid"))})}$("#Main .tab").addClass("v2p-hover-btn"),$('#Main .topic-link, .item_hot_topic_title > a, .item_node, a[href="/write"]').prop("target","_blank");x();
